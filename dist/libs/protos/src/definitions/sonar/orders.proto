syntax="proto3";

package sonar;

import "google/protobuf/empty.proto";
import "google/protobuf/timestamp.proto";

message Order {
  string id = 1;
  string base = 2;
  string quote = 3;
  string side = 4;
  string type = 5;
  optional double volume = 6;
  optional double quote_volume = 7;
  optional double display_volume = 8;
  optional string time_in_force = 9;
  optional double limit_price = 10;
  optional double trailing_delta = 11;
  optional double trigger_price = 12;
}

message PlaceOrdersRequest {
  string user_id = 1;
  string broker = 2;
  google.protobuf.Timestamp expire_at = 3;
  repeated Order orders = 4;
}

message OrdersListResponse {
  repeated Order orders = 1;
}

message CancelRequest {
  string id = 1;
  string base = 2;
  string quote = 3;
}

message CancelOrdersRequest {
  string user_id = 1;
  string broker = 2;
  repeated CancelRequest orders = 3;
}

service Orders{
  rpc PlaceOrders(PlaceOrdersRequest) returns (OrdersListResponse);
  rpc CancelOrders(CancelOrdersRequest) returns (google.protobuf.Empty);
}
